import Suggest            from '@/site/Suggest.jsx'
import SubmitResponse     from './_examples/SubmitResponse'
import SubmitResponseSrc  from './_examples/SubmitResponse.tsx?raw'
import { TSNotes }        from '@/ui/TSNotes.jsx'
import { Example, Split } from '@abw/badger-website'
import { FormOnSubmitLink, FormOnSuccessLink } from '@/site/Links.jsx'

# Submission Response

<div className="intro">
  We now need to think about what happens in the real world where a form
  submission results in a call to a back-end API.  There are, broadly
  speaking, two possible outcomes: the call is successful, or it fails
  for some reason.
</div>

## `onSuccess`

<Split align="end">
  <div>
    Let's start by looking at the case there the submission is
    successful.  In this example we define an <FormOnSubmitLink/> function
    which returns a resolved promise.  This is emulating how both{' '}
    <a href="https://axios-http.com/">Axios</a> and the native{' '}
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a>{' '}
    work.

    The additional step is to define an <FormOnSuccessLink/> handler
    which can do something to handle the successful response.  In this
    case we're calling the `setResponse` function to store
    the response data, much like in the previous example, except that this
    time we're emulating the full request and response cycle.
  </div>
  <Suggest>
    Try entering some values in the form below and click on the
    "Login" button.  You should see the values returned by
    an emulated server response appear in a debugging window beneath the
    form.  Also note that the form is reset on a successful submission.
  </Suggest>
</Split>

<Example
  Component={SubmitResponse}
  code={SubmitResponseSrc}
  caption="Submission Response"
  highlightLines="11-12,32"
  expand
/>


<TSNotes>
If you're using Typescript then you can import the `FormSubmitHandler` type
for your `onSubmit` handler and `FormSubmitResponse` for the response data
passed to the `onSuccess` handler.
</TSNotes>

## Where Next?

What happens if the submission isn't successful?  We'll look
at handling submission errors on the next page.
